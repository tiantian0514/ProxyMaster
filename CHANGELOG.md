# ProxyMaster 更新日志

## [v1.0.4] - 2024-12-19

### 🎉 重大功能更新
- **按标签页代理管理**：实现了按标签页的独立代理管理功能
- **同源策略支持**：同一标签页内的所有资源请求保持使用相同的代理设置
- **混合连接问题解决**：彻底解决了部分资源走代理、部分资源走直连的问题

### ✨ 新增功能
- 标签页代理状态跟踪和管理
- 智能资源继承机制
- 标签页状态调试工具
- 增强的网络请求处理逻辑

### 🔧 技术改进
- 新增 `tabProxyStates` 状态管理
- 改进 `handleWebRequest` 方法支持按标签页代理
- 增强 `setTabProxy` 方法记录标签页状态
- 添加标签页关闭时的状态清理机制

### 📚 文档更新
- 新增 `TAB_PROXY_GUIDE.md` 详细功能说明
- 更新调试工具支持标签页状态查看

### 🎯 使用场景优化
- YouTube等视频网站的完整代理支持
- 多标签页独立代理管理
- 复杂网站的资源加载优化

## [v1.0.3] - 2024-12-19

### 🎯 重大功能更新
- **自动回退功能** - 解决了用户体验的重要问题：当访问没有匹配规则的网站时，自动切换回直连模式
- **智能切换逻辑优化** - 现在的行为更符合用户预期：代理→直连的自动回退

### ✨ 新增功能
- **自动回退设置** - 在高级设置中新增"启用自动回退到直连"选项
- **回退测试工具** - 在调试页面新增专门的自动回退测试功能
- **详细调试日志** - 增强了自动切换的调试信息输出
- **完整导出功能** - 导出现在包含自动切换规则、扩展设置和统计信息
- **智能导入功能** - 支持新旧格式，自动合并配置，导入扩展设置

### 🔄 行为变更
- **传统行为**: 直连→代理→保持代理状态
- **新的行为**: 直连→代理→自动回退到直连（当没有匹配规则时）

### 🧪 测试工具
- **回退测试场景** - 提供完整的测试流程和预期结果
- **状态检查增强** - 调试工具现在显示自动回退的启用状态
- **测试用例覆盖** - 包含Google.com（有规则）和Baidu.com（无规则）的测试

### 📚 文档更新
- **功能说明文档** - 新增`AUTO_FALLBACK_GUIDE.md`详细说明文档
- **使用指南** - 包含设置方法、测试步骤、故障排除等
- **导出导入指南** - 新增`EXPORT_IMPORT_GUIDE.md`完整的导出导入说明
- **示例配置文件** - 提供`sample-config.json`作为参考

### 🎛️ 用户控制
- **可选功能** - 用户可以选择启用或禁用自动回退功能
- **默认启用** - 为了更好的用户体验，默认启用自动回退功能
- **向下兼容** - 不影响现有用户的使用习惯

## [v1.0.2] - 2024-12-18

### 🐛 Bug修复
- **修复右键菜单重复创建错误** - 解决了"Cannot create item with duplicate id"的问题
- **完善配置文件编辑功能** - 现在可以正常编辑已有的代理配置
- **完善自动切换规则编辑功能** - 现在可以正常编辑已有的自动切换规则

### ✨ 新增功能
- **配置编辑模式** - 支持编辑现有代理配置的所有参数
- **规则编辑模式** - 支持编辑现有自动切换规则的所有参数
- **智能表单状态管理** - 编辑时自动填充现有数据，保存后正确重置状态

### 🔧 技术改进
- **右键菜单优化** - 使用`removeAll()`避免重复创建菜单项
- **编辑状态管理** - 添加`editingProfile`和`editingRuleIndex`状态变量
- **表单验证增强** - 编辑模式下跳过重复名称检查
- **用户反馈优化** - 区分"保存"和"更新"操作的提示信息

### 📝 代码质量
- **错误处理改进** - 增强了编辑功能的错误处理机制
- **代码注释完善** - 为编辑相关功能添加了详细注释
- **状态重置机制** - 确保模态框关闭后正确重置编辑状态

## [v1.0.1] - 2024-12-18

### 🐛 Bug修复
- 修复代理切换到直连模式的问题
- 修复自动切换规则不生效的问题
- 修复配置导入/导出功能

### ✨ 新增功能
- 添加自动切换规则管理
- 添加性能监控和统计
- 添加调试工具页面

## [v1.0.0] - 2024-12-17

### 🎉 首次发布
- **基础代理管理** - 支持HTTP、HTTPS、SOCKS4、SOCKS5代理
- **智能切换** - 基于域名、URL、通配符、正则表达式的自动切换
- **现代化界面** - 毛玻璃效果的现代化用户界面
- **配置管理** - 支持配置的导入、导出、备份
- **性能监控** - 实时监控代理性能和连接状态
- **Chrome Web Store** - 提交审核中

### 🎯 核心特性
- Manifest V3 兼容
- 无缝代理切换
- 智能规则引擎
- 详细统计分析
- 隐私保护优先

---

## 🔮 未来计划

### v1.1.0 (计划中)
- [ ] 云同步功能
- [ ] 团队协作功能
- [ ] 高级统计分析
- [ ] 移动端支持

### v1.2.0 (计划中)
- [ ] AI智能推荐
- [ ] 负载均衡
- [ ] 故障转移
- [ ] 企业级功能

---

## 📞 支持与反馈

- **GitHub Issues**: [https://github.com/tiantian0514/ProxyMaster/issues](https://github.com/tiantian0514/ProxyMaster/issues)
- **邮箱**: hkhuangym@gmail.com
- **QQ群**: 545380701

感谢您使用ProxyMaster！🚀 