<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ProxyMaster è®¾ç½®</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      background: #f5f5f5;
      color: #333;
      line-height: 1.6;
    }

    .container {
      max-width: 1200px;
      margin: 0 auto;
      padding: 20px;
    }

    .header {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
      padding: 30px;
      border-radius: 12px;
      margin-bottom: 30px;
      text-align: center;
    }

    .header h1 {
      font-size: 28px;
      margin-bottom: 8px;
    }

    .header p {
      opacity: 0.9;
      font-size: 16px;
    }

    .nav-tabs {
      display: flex;
      background: white;
      border-radius: 8px;
      padding: 4px;
      margin-bottom: 30px;
      box-shadow: 0 2px 10px rgba(0,0,0,0.1);
    }

    .nav-tab {
      flex: 1;
      padding: 12px 20px;
      text-align: center;
      background: none;
      border: none;
      border-radius: 6px;
      cursor: pointer;
      transition: all 0.2s ease;
      font-weight: 500;
    }

    .nav-tab.active {
      background: #667eea;
      color: white;
    }

    .nav-tab:hover:not(.active) {
      background: #f0f0f0;
    }

    .tab-content {
      display: none;
    }

    .tab-content.active {
      display: block;
    }

    .card {
      background: white;
      border-radius: 12px;
      padding: 24px;
      margin-bottom: 20px;
      box-shadow: 0 2px 10px rgba(0,0,0,0.1);
    }

    .card h3 {
      margin-bottom: 16px;
      color: #333;
      font-size: 18px;
    }

    .form-group {
      margin-bottom: 20px;
    }

    .form-group label {
      display: block;
      margin-bottom: 6px;
      font-weight: 500;
      color: #555;
    }

    .form-group input,
    .form-group select,
    .form-group textarea {
      width: 100%;
      padding: 10px 12px;
      border: 2px solid #e1e1e1;
      border-radius: 6px;
      font-size: 14px;
      transition: border-color 0.2s ease;
    }

    .form-group input:focus,
    .form-group select:focus,
    .form-group textarea:focus {
      outline: none;
      border-color: #667eea;
    }

    .btn {
      padding: 10px 20px;
      border: none;
      border-radius: 6px;
      cursor: pointer;
      font-weight: 500;
      transition: all 0.2s ease;
      margin-right: 10px;
    }

    .btn-primary {
      background: #667eea;
      color: white;
    }

    .btn-primary:hover {
      background: #5a6fd8;
    }

    .btn-secondary {
      background: #6c757d;
      color: white;
    }

    .btn-danger {
      background: #dc3545;
      color: white;
    }

    .profile-list {
      display: grid;
      gap: 16px;
    }

    .profile-item {
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 16px;
      border: 2px solid #e1e1e1;
      border-radius: 8px;
      transition: all 0.2s ease;
    }

    .profile-item:hover {
      border-color: #667eea;
    }

    .profile-item.active {
      border-color: #667eea;
      background: #f8f9ff;
    }

    .profile-info h4 {
      margin-bottom: 4px;
      color: #333;
    }

    .profile-info p {
      color: #666;
      font-size: 14px;
    }

    .profile-actions {
      display: flex;
      gap: 8px;
    }

    .status-indicator {
      width: 12px;
      height: 12px;
      border-radius: 50%;
      background: #28a745;
      margin-right: 8px;
    }

    .status-indicator.inactive {
      background: #6c757d;
    }

    .empty-state {
      text-align: center;
      padding: 40px;
      color: #666;
    }

    .empty-state-icon {
      font-size: 48px;
      margin-bottom: 16px;
    }

    .stats-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 20px;
      margin-bottom: 20px;
    }

    .stat-card {
      background: white;
      padding: 20px;
      border-radius: 8px;
      text-align: center;
      box-shadow: 0 2px 10px rgba(0,0,0,0.1);
    }

    .stat-value {
      font-size: 24px;
      font-weight: bold;
      color: #667eea;
      margin-bottom: 4px;
    }

    .stat-label {
      color: #666;
      font-size: 14px;
    }

    .toast {
      position: fixed;
      top: 20px;
      right: 20px;
      padding: 12px 20px;
      border-radius: 6px;
      color: white;
      font-weight: 500;
      z-index: 1000;
      transform: translateX(100%);
      transition: transform 0.3s ease;
    }

    .toast.show {
      transform: translateX(0);
    }

    .toast.success {
      background: #28a745;
    }

    .toast.error {
      background: #dc3545;
    }

    .toast.info {
      background: #17a2b8;
    }

    .modal {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: rgba(0,0,0,0.5);
      display: none;
      align-items: center;
      justify-content: center;
      z-index: 1000;
    }

    .modal.show {
      display: flex;
    }

    .modal-content {
      background: white;
      border-radius: 12px;
      padding: 24px;
      max-width: 500px;
      width: 90%;
      max-height: 80vh;
      overflow-y: auto;
    }

    .modal-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 20px;
    }

    .modal-header h3 {
      margin: 0;
    }

    .close-btn {
      background: none;
      border: none;
      font-size: 24px;
      cursor: pointer;
      color: #666;
    }

    .empty-state {
      text-align: center;
      padding: 40px 20px;
      color: #666;
    }

    .empty-state-icon {
      font-size: 48px;
      margin-bottom: 16px;
    }

    .empty-state h4 {
      margin-bottom: 8px;
      color: #333;
    }

    .empty-state p {
      margin: 0;
      font-size: 14px;
    }

    .inactive {
      opacity: 0.5;
    }

    /* è‡ªå®šä¹‰å•é€‰æŒ‰é’®æ ·å¼ */
    .custom-radio {
      position: relative;
      display: flex;
      align-items: center;
      cursor: pointer;
      margin-bottom: 8px;
      padding: 8px 0;
    }

    .custom-radio input[type="radio"] {
      position: absolute;
      opacity: 0;
      cursor: pointer;
      width: 0;
      height: 0;
    }

    .custom-radio .radio-checkmark {
      position: relative;
      height: 18px;
      width: 18px;
      background-color: #fff;
      border: 2px solid #ddd;
      border-radius: 50%;
      margin-right: 10px;
      transition: all 0.2s ease;
    }

    .custom-radio:hover .radio-checkmark {
      border-color: #667eea;
    }

    .custom-radio input[type="radio"]:checked ~ .radio-checkmark {
      background-color: #667eea;
      border-color: #667eea;
    }

    .custom-radio .radio-checkmark:after {
      content: "";
      position: absolute;
      display: none;
      top: 50%;
      left: 50%;
      width: 6px;
      height: 6px;
      border-radius: 50%;
      background: white;
      transform: translate(-50%, -50%);
    }

    .custom-radio input[type="radio"]:checked ~ .radio-checkmark:after {
      display: block;
    }

    /* è‡ªå®šä¹‰å¤é€‰æ¡†æ ·å¼ */
    .custom-checkbox {
      position: relative;
      display: flex;
      align-items: center;
      cursor: pointer;
      margin-bottom: 8px;
      padding: 8px 0;
    }

    .custom-checkbox input[type="checkbox"] {
      position: absolute;
      opacity: 0;
      cursor: pointer;
      width: 0;
      height: 0;
    }

    .custom-checkbox .checkbox-checkmark {
      position: relative;
      height: 18px;
      width: 18px;
      background-color: #fff;
      border: 2px solid #ddd;
      border-radius: 3px;
      margin-right: 10px;
      transition: all 0.2s ease;
    }

    .custom-checkbox:hover .checkbox-checkmark {
      border-color: #667eea;
    }

    .custom-checkbox input[type="checkbox"]:checked ~ .checkbox-checkmark {
      background-color: #667eea;
      border-color: #667eea;
    }

    .custom-checkbox .checkbox-checkmark:after {
      content: "";
      position: absolute;
      display: none;
      left: 5px;
      top: 2px;
      width: 4px;
      height: 8px;
      border: solid white;
      border-width: 0 2px 2px 0;
      transform: rotate(45deg);
    }

    .custom-checkbox input[type="checkbox"]:checked ~ .checkbox-checkmark:after {
      display: block;
    }
  </style>
</head>
<body>
  <div class="container">
    <div class="header">
      <h1>ProxyMaster è®¾ç½®</h1>
      <p>ç®¡ç†ä½ çš„ä»£ç†é…ç½®å’Œè‡ªåŠ¨åˆ‡æ¢è§„åˆ™</p>
    </div>

    <div class="nav-tabs">
      <button class="nav-tab active" data-tab="profiles">ä»£ç†é…ç½®</button>
      <button class="nav-tab" data-tab="v2ray">V2Rayè®¢é˜…</button>
      <button class="nav-tab" data-tab="rules">è‡ªåŠ¨åˆ‡æ¢</button>
      <button class="nav-tab" data-tab="stats">ç»Ÿè®¡åˆ†æ</button>
      <button class="nav-tab" data-tab="settings">é«˜çº§è®¾ç½®</button>
    </div>

    <!-- ä»£ç†é…ç½®æ ‡ç­¾é¡µ -->
    <div class="tab-content active" id="profiles">
      <div class="card">
        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
          <h3>ä»£ç†é…ç½®åˆ—è¡¨</h3>
          <button class="btn btn-primary" id="addProfileBtn">â• æ–°å»ºé…ç½®</button>
        </div>
        <div class="profile-list" id="profileList">
          <!-- é…ç½®åˆ—è¡¨å°†åœ¨è¿™é‡ŒåŠ¨æ€ç”Ÿæˆ -->
        </div>
      </div>
    </div>

    <!-- V2Rayè®¢é˜…æ ‡ç­¾é¡µ -->
    <div class="tab-content" id="v2ray">
      <div class="card">
        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
          <h3>V2Rayè®¢é˜…ç®¡ç†</h3>
          <button class="btn btn-primary" id="addSubscriptionBtn">â• æ·»åŠ è®¢é˜…</button>
        </div>
        <div id="subscriptionsList">
          <!-- è®¢é˜…åˆ—è¡¨å°†åœ¨è¿™é‡ŒåŠ¨æ€ç”Ÿæˆ -->
        </div>
      </div>
      
      <div class="card">
        <h3>èŠ‚ç‚¹åˆ—è¡¨</h3>
        <div id="nodesList">
          <!-- èŠ‚ç‚¹åˆ—è¡¨å°†åœ¨è¿™é‡ŒåŠ¨æ€ç”Ÿæˆ -->
        </div>
      </div>
    </div>

    <!-- è‡ªåŠ¨åˆ‡æ¢æ ‡ç­¾é¡µ -->
    <div class="tab-content" id="rules">
      <div class="card">
        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
          <h3>è‡ªåŠ¨åˆ‡æ¢è§„åˆ™</h3>
          <button class="btn btn-primary" id="addRuleBtn">â• æ–°å»ºè§„åˆ™</button>
        </div>
        <div id="rulesList">
          <!-- è§„åˆ™åˆ—è¡¨å°†åœ¨è¿™é‡ŒåŠ¨æ€ç”Ÿæˆ -->
        </div>
      </div>
    </div>

    <!-- ç»Ÿè®¡åˆ†ææ ‡ç­¾é¡µ -->
    <div class="tab-content" id="stats">
      <div class="stats-grid">
        <div class="stat-card">
          <div class="stat-value" id="totalRequests">0</div>
          <div class="stat-label">æ€»è¯·æ±‚æ•°</div>
        </div>
        <div class="stat-card">
          <div class="stat-value" id="totalSwitches">0</div>
          <div class="stat-label">åˆ‡æ¢æ¬¡æ•°</div>
        </div>
        <div class="stat-card">
          <div class="stat-value" id="activeProfiles">0</div>
          <div class="stat-label">æ´»è·ƒé…ç½®</div>
        </div>
        <div class="stat-card">
          <div class="stat-value" id="avgResponseTime">0ms</div>
          <div class="stat-label">å¹³å‡å“åº”æ—¶é—´</div>
        </div>
        <div class="stat-card">
          <div class="stat-value" id="successRate">0%</div>
          <div class="stat-label">æˆåŠŸç‡</div>
        </div>
        <div class="stat-card">
          <div class="stat-value" id="totalTests">0</div>
          <div class="stat-label">è¿æ¥æµ‹è¯•</div>
        </div>
      </div>
      
      <!-- æ—¶é—´èŒƒå›´é€‰æ‹© -->
      <div class="card">
        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
          <h3>æ€§èƒ½æŠ¥å‘Š</h3>
          <div style="display: flex; gap: 10px; align-items: center;">
            <select id="statsTimeRange" style="padding: 6px 12px; border: 1px solid #ddd; border-radius: 4px;">
              <option value="1">æœ€è¿‘1å¤©</option>
              <option value="7" selected>æœ€è¿‘7å¤©</option>
              <option value="30">æœ€è¿‘30å¤©</option>
            </select>
            <button class="btn btn-secondary" id="refreshStatsBtn">ğŸ”„ åˆ·æ–°</button>
            <button class="btn btn-secondary" id="exportStatsBtn">ğŸ“Š å¯¼å‡ºæ•°æ®</button>
          </div>
        </div>
        
        <!-- æ€§èƒ½ç›‘æ§çŠ¶æ€ -->
        <div id="performanceStatus" style="margin-bottom: 20px;">
          <div class="alert alert-info" style="padding: 12px; background: #e7f3ff; border: 1px solid #b3d9ff; border-radius: 6px; margin-bottom: 15px;">
            <strong>ğŸ’¡ æç¤ºï¼š</strong>
            <span id="statusText">æ€§èƒ½ç›‘æ§åŠŸèƒ½éœ€è¦åœ¨é«˜çº§è®¾ç½®ä¸­å¯ç”¨</span>
            <button class="btn btn-primary" id="enableMonitoringBtn" style="margin-left: 10px; padding: 4px 12px; font-size: 12px;">å¯ç”¨ç›‘æ§</button>
          </div>
        </div>
        
        <!-- å›¾è¡¨å®¹å™¨ -->
        <div id="chartsContainer">
          <!-- å“åº”æ—¶é—´è¶‹åŠ¿ -->
          <div class="chart-section" style="margin-bottom: 30px;">
            <h4 style="margin-bottom: 15px;">ğŸ“ˆ å“åº”æ—¶é—´è¶‹åŠ¿</h4>
            <div id="responseTimeChart" style="text-align: center; background: #f9f9f9; border-radius: 8px; padding: 20px;">
              <div class="empty-state">
                <div class="empty-state-icon">ğŸ“Š</div>
                <h4>æš‚æ— æ•°æ®</h4>
                <p>å¯ç”¨æ€§èƒ½ç›‘æ§åï¼Œè¿™é‡Œå°†æ˜¾ç¤ºå“åº”æ—¶é—´è¶‹åŠ¿å›¾</p>
              </div>
            </div>
          </div>
          
          <!-- ä»£ç†ä½¿ç”¨åˆ†å¸ƒå’Œè¯·æ±‚é‡ç»Ÿè®¡ -->
          <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 30px; margin-bottom: 30px;">
            <div class="chart-section">
              <h4 style="margin-bottom: 15px;">ğŸ¥§ ä»£ç†ä½¿ç”¨åˆ†å¸ƒ</h4>
              <div id="proxyUsageChart" style="text-align: center; background: #f9f9f9; border-radius: 8px; padding: 20px;">
                <div class="empty-state">
                  <div class="empty-state-icon">ğŸ“Š</div>
                  <h4>æš‚æ— æ•°æ®</h4>
                  <p>å¯ç”¨æ€§èƒ½ç›‘æ§åæ˜¾ç¤º</p>
                </div>
              </div>
            </div>
            
            <div class="chart-section">
              <h4 style="margin-bottom: 15px;">ğŸ“Š è¯·æ±‚é‡ç»Ÿè®¡</h4>
              <div id="requestVolumeChart" style="text-align: center; background: #f9f9f9; border-radius: 8px; padding: 20px;">
                <div class="empty-state">
                  <div class="empty-state-icon">ğŸ“Š</div>
                  <h4>æš‚æ— æ•°æ®</h4>
                  <p>å¯ç”¨æ€§èƒ½ç›‘æ§åæ˜¾ç¤º</p>
                </div>
              </div>
            </div>
          </div>
          
          <!-- 24å°æ—¶è®¿é—®çƒ­åŠ›å›¾ -->
          <div class="chart-section" style="margin-bottom: 30px;">
            <h4 style="margin-bottom: 15px;">ğŸ”¥ 24å°æ—¶è®¿é—®åˆ†å¸ƒ</h4>
            <div id="hourlyHeatmapChart" style="text-align: center; background: #f9f9f9; border-radius: 8px; padding: 20px;">
              <div class="empty-state">
                <div class="empty-state-icon">ğŸ“Š</div>
                <h4>æš‚æ— æ•°æ®</h4>
                <p>å¯ç”¨æ€§èƒ½ç›‘æ§åï¼Œè¿™é‡Œå°†æ˜¾ç¤º24å°æ—¶è®¿é—®çƒ­åŠ›å›¾</p>
              </div>
            </div>
          </div>
          
          <!-- çƒ­é—¨ç½‘ç«™æ’è¡Œ -->
          <div class="chart-section">
            <h4 style="margin-bottom: 15px;">ğŸ† çƒ­é—¨ç½‘ç«™æ’è¡Œ</h4>
            <div id="domainRankingChart" style="text-align: center; background: #f9f9f9; border-radius: 8px; padding: 20px;">
              <div class="empty-state">
                <div class="empty-state-icon">ğŸ“Š</div>
                <h4>æš‚æ— æ•°æ®</h4>
                <p>å¯ç”¨æ€§èƒ½ç›‘æ§åï¼Œè¿™é‡Œå°†æ˜¾ç¤ºæœ€å¸¸è®¿é—®çš„ç½‘ç«™æ’è¡Œ</p>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- é«˜çº§è®¾ç½®æ ‡ç­¾é¡µ -->
    <div class="tab-content" id="settings">
      <div class="card">
        <h3>é€šç”¨è®¾ç½®</h3>
        <div class="form-group">
          <label class="custom-checkbox">
            <input type="checkbox" id="enableNotifications" name="enableNotifications">
            <span class="checkbox-checkmark"></span>
            å¯ç”¨é€šçŸ¥
          </label>
        </div>
        <div class="form-group">
          <label class="custom-checkbox">
            <input type="checkbox" id="enableAutoSwitch" name="enableAutoSwitch">
            <span class="checkbox-checkmark"></span>
            å¯ç”¨æ™ºèƒ½åˆ‡æ¢
          </label>
        </div>
        <div class="form-group">
          <label class="custom-checkbox">
            <input type="checkbox" id="enableAutoFallback" name="enableAutoFallback">
            <span class="checkbox-checkmark"></span>
            å¯ç”¨è‡ªåŠ¨å›é€€åˆ°ç›´è¿
          </label>
          <small style="color: #666; font-size: 12px; margin-top: 4px; display: block;">
            å½“è®¿é—®çš„ç½‘ç«™æ²¡æœ‰åŒ¹é…ä»»ä½•ä»£ç†è§„åˆ™æ—¶ï¼Œè‡ªåŠ¨åˆ‡æ¢å›ç›´è¿æ¨¡å¼
          </small>
        </div>
        <div class="form-group">
          <label class="custom-checkbox">
            <input type="checkbox" id="enablePerformanceMonitoring" name="enablePerformanceMonitoring">
            <span class="checkbox-checkmark"></span>
            å¯ç”¨æ€§èƒ½ç›‘æ§
          </label>
        </div>
        <button class="btn btn-primary" id="saveSettingsBtn">ä¿å­˜è®¾ç½®</button>
      </div>

      <div class="card">
        <h3>æ•°æ®ç®¡ç†</h3>
        <button class="btn btn-secondary" id="exportBtn">å¯¼å‡ºé…ç½®</button>
        <button class="btn btn-secondary" id="importBtn">å¯¼å…¥é…ç½®</button>
        <button class="btn btn-danger" id="clearDataBtn">æ¸…é™¤æ‰€æœ‰æ•°æ®</button>
      </div>
    </div>
  </div>

  <!-- æ·»åŠ é…ç½®æ¨¡æ€æ¡† -->
  <div class="modal" id="addProfileModal">
    <div class="modal-content">
      <div class="modal-header">
        <h3>æ–°å»ºä»£ç†é…ç½®</h3>
        <button class="close-btn" id="closeProfileModalBtn">&times;</button>
      </div>
      <form id="profileForm">
        <div class="form-group">
          <label>é…ç½®åç§°</label>
          <input type="text" id="profileName" name="profileName" placeholder="å»ºè®®æ ¼å¼ï¼šUS-é«˜é€Ÿã€HK-ä¸“çº¿ã€JP-æ¸¸æˆ" required>
          <small style="color: #666; font-size: 12px; margin-top: 4px; display: block;">
            å»ºè®®ä½¿ç”¨åœ°åŒºä»£ç å¼€å¤´ï¼Œå¦‚ï¼šUS-é«˜é€Ÿã€HK-ä¸“çº¿ã€JP-æ¸¸æˆï¼Œä¾¿äºè¯†åˆ«å’Œç®¡ç†<br>
            å¸¸ç”¨ä»£ç ï¼šUS-ç¾å›½ã€HK-é¦™æ¸¯ã€JP-æ—¥æœ¬ã€SG-æ–°åŠ å¡ã€UK-è‹±å›½ã€DE-å¾·å›½ã€KR-éŸ©å›½ã€TW-å°æ¹¾
          </small>
        </div>
        <div class="form-group">
          <label>æ˜¾ç¤ºåç§°</label>
          <input type="text" id="profileDisplayName" name="profileDisplayName" placeholder="ç¾å›½é«˜é€Ÿä»£ç†ã€é¦™æ¸¯CN2ä¸“çº¿ã€æ—¥æœ¬æ¸¸æˆåŠ é€Ÿ">
          <small style="color: #666; font-size: 12px; margin-top: 4px; display: block;">
            ç”¨äºç•Œé¢æ˜¾ç¤ºçš„å®Œæ•´æè¿°ï¼Œä¾¿äºç†è§£ä»£ç†ç”¨é€”å’Œç‰¹ç‚¹
          </small>
        </div>
        <div class="form-group">
          <label>åè®®ç±»å‹</label>
          <select id="profileProtocol" name="profileProtocol">
            <optgroup label="ä¼ ç»Ÿä»£ç†åè®®">
              <option value="http">HTTP</option>
              <option value="https">HTTPS</option>
              <option value="socks4">SOCKS4</option>
              <option value="socks5">SOCKS5</option>
            </optgroup>
            <optgroup label="V2Rayåè®®">
              <option value="vmess">VMess</option>
              <option value="vless">VLESS</option>
              <option value="trojan">Trojan</option>
              <option value="shadowsocks">Shadowsocks</option>
            </optgroup>
          </select>
        </div>
        
        <!-- ä¼ ç»Ÿä»£ç†é…ç½®å­—æ®µ -->
        <div id="traditionalProxyFields">
          <div class="form-group">
            <label>æœåŠ¡å™¨åœ°å€</label>
            <input type="text" id="profileHost" name="profileHost" required>
          </div>
          <div class="form-group">
            <label>ç«¯å£</label>
            <input type="number" id="profilePort" name="profilePort" required>
          </div>
          <div class="form-group">
            <label>ç”¨æˆ·åï¼ˆå¯é€‰ï¼‰</label>
            <input type="text" id="profileUsername" name="profileUsername">
          </div>
          <div class="form-group">
            <label>å¯†ç ï¼ˆå¯é€‰ï¼‰</label>
            <input type="password" id="profilePassword" name="profilePassword">
          </div>
        </div>

        <!-- V2Rayåè®®é…ç½®å­—æ®µ -->
        <div id="v2rayProxyFields" style="display: none;">
          <div class="form-group">
            <label>æœåŠ¡å™¨åœ°å€</label>
            <input type="text" id="v2rayHost" name="v2rayHost" required>
          </div>
          <div class="form-group">
            <label>ç«¯å£</label>
            <input type="number" id="v2rayPort" name="v2rayPort" required>
          </div>
          <div class="form-group">
            <label>ç”¨æˆ·ID / å¯†ç </label>
            <input type="text" id="v2rayId" name="v2rayId" placeholder="VMess/VLESSç”¨æˆ·ID æˆ– Trojan/SSå¯†ç " required>
            <small style="color: #666; font-size: 12px; margin-top: 4px; display: block;">
              VMess/VLESS: è¾“å…¥UUIDæ ¼å¼çš„ç”¨æˆ·ID<br>
              Trojan: è¾“å…¥å¯†ç <br>
              Shadowsocks: è¾“å…¥å¯†ç 
            </small>
          </div>
          <div class="form-group" id="vmessFields" style="display: none;">
            <label>é¢å¤–ID (alterId)</label>
            <input type="number" id="v2rayAlterId" name="v2rayAlterId" value="0" min="0">
            <small style="color: #666; font-size: 12px; margin-top: 4px; display: block;">
              VMessåè®®çš„é¢å¤–IDï¼Œé€šå¸¸ä¸º0
            </small>
          </div>
          <div class="form-group" id="ssFields" style="display: none;">
            <label>åŠ å¯†æ–¹å¼</label>
            <select id="v2rayMethod" name="v2rayMethod">
              <option value="aes-256-gcm">aes-256-gcm</option>
              <option value="aes-128-gcm">aes-128-gcm</option>
              <option value="chacha20-poly1305">chacha20-poly1305</option>
              <option value="chacha20-ietf-poly1305">chacha20-ietf-poly1305</option>
            </select>
          </div>
          <div class="form-group">
            <label>ä¼ è¾“åè®®</label>
            <select id="v2rayNetwork" name="v2rayNetwork">
              <option value="tcp">TCP</option>
              <option value="ws">WebSocket</option>
              <option value="h2">HTTP/2</option>
              <option value="grpc">gRPC</option>
            </select>
          </div>
          <div class="form-group">
            <label class="custom-checkbox">
              <input type="checkbox" id="v2rayTls" name="v2rayTls">
              <span class="checkbox-checkmark"></span>
              å¯ç”¨TLSåŠ å¯†
            </label>
          </div>
          <div class="form-group" id="wsFields" style="display: none;">
            <label>WebSocketè·¯å¾„</label>
            <input type="text" id="v2rayWsPath" name="v2rayWsPath" placeholder="ä¾‹å¦‚: /ws">
          </div>
          <div class="alert alert-info" style="margin-top: 15px;">
            <strong>ğŸ’¡ ä½¿ç”¨è¯´æ˜ï¼š</strong><br>
            â€¢ <strong>VMess/VLESS</strong>: éœ€è¦æœ¬åœ°V2Rayå®¢æˆ·ç«¯æ”¯æŒï¼Œæ‰©å±•ä¼šè¿æ¥åˆ°127.0.0.1:1080<br>
            â€¢ <strong>Trojan/Shadowsocks</strong>: å¯ç›´æ¥ä½¿ç”¨ï¼Œæ— éœ€é¢å¤–å®¢æˆ·ç«¯<br>
            â€¢ å»ºè®®ä¼˜å…ˆä½¿ç”¨V2Rayè®¢é˜…åŠŸèƒ½ï¼Œé…ç½®æ›´ç®€å•å‡†ç¡®
          </div>
        </div>
        <div style="text-align: right;">
          <button type="button" class="btn btn-secondary" id="cancelProfileBtn">å–æ¶ˆ</button>
          <button type="submit" class="btn btn-primary">ä¿å­˜</button>
        </div>
      </form>
    </div>
  </div>

  <!-- æ·»åŠ è§„åˆ™æ¨¡æ€æ¡† -->
  <div class="modal" id="addRuleModal">
    <div class="modal-content">
      <div class="modal-header">
        <h3>æ–°å»ºè‡ªåŠ¨åˆ‡æ¢è§„åˆ™</h3>
        <button class="close-btn" id="closeRuleModalBtn">&times;</button>
      </div>
      <form id="ruleForm">
        <div class="form-group">
          <label>è§„åˆ™åç§°</label>
          <input type="text" id="ruleName" name="ruleName" placeholder="ä¾‹å¦‚ï¼šGoogleæœåŠ¡" required>
        </div>
        <div class="form-group">
          <label>åŒ¹é…ç±»å‹</label>
          <select id="ruleType" name="ruleType">
            <option value="domain">åŸŸååŒ¹é…</option>
            <option value="url">URLåŒ¹é…</option>
            <option value="wildcard">é€šé…ç¬¦åŒ¹é…</option>
            <option value="regex">æ­£åˆ™è¡¨è¾¾å¼</option>
          </select>
        </div>
        <div class="form-group">
          <label>åŒ¹é…æ¨¡å¼</label>
          <input type="text" id="rulePattern" name="rulePattern" placeholder="ä¾‹å¦‚ï¼š*.google.com" required>
          <small style="color: #666; font-size: 12px; margin-top: 4px; display: block;">
            <span id="patternHelp">åŸŸååŒ¹é…ï¼šæ”¯æŒé€šé…ç¬¦ï¼Œå¦‚ *.google.com</span>
          </small>
        </div>
        <div class="form-group">
          <label>ä½¿ç”¨ä»£ç†</label>
          <select id="ruleProfile" name="ruleProfile" required>
            <option value="">è¯·é€‰æ‹©ä»£ç†é…ç½®</option>
            <option value="direct">ç›´è¿</option>
          </select>
        </div>
        <div class="form-group">
          <label>ä¼˜å…ˆçº§</label>
          <input type="number" id="rulePriority" name="rulePriority" value="100" min="1" max="1000">
          <small style="color: #666; font-size: 12px; margin-top: 4px; display: block;">
            æ•°å€¼è¶Šå¤§ä¼˜å…ˆçº§è¶Šé«˜ï¼ŒèŒƒå›´ï¼š1-1000
          </small>
        </div>
        <div style="text-align: right;">
          <button type="button" class="btn btn-secondary" id="cancelRuleBtn">å–æ¶ˆ</button>
          <button type="submit" class="btn btn-primary">ä¿å­˜</button>
        </div>
      </form>
    </div>
  </div>

  <!-- æ·»åŠ V2Rayè®¢é˜…æ¨¡æ€æ¡† -->
  <div class="modal" id="addSubscriptionModal">
    <div class="modal-content">
      <div class="modal-header">
        <h3>æ·»åŠ V2Rayè®¢é˜…</h3>
        <button class="close-btn" id="closeSubscriptionModalBtn">&times;</button>
      </div>
      <form id="subscriptionForm">
        <div class="form-group">
          <label>è®¢é˜…åç§°</label>
          <input type="text" id="subscriptionName" name="subscriptionName" placeholder="ä¾‹å¦‚ï¼šæœºåœºAã€è‡ªå»ºèŠ‚ç‚¹" required>
          <small style="color: #666; font-size: 12px; margin-top: 4px; display: block;">
            ä¾¿äºè¯†åˆ«çš„è®¢é˜…åç§°
          </small>
        </div>
        
        <!-- æ·»åŠ æ–¹å¼é€‰æ‹© -->
        <div class="form-group">
          <label>æ·»åŠ æ–¹å¼</label>
          <div>
            <label class="custom-radio">
              <input type="radio" name="addMethod" value="url" checked>
              <span class="radio-checkmark"></span>
              è®¢é˜…é“¾æ¥
            </label>
            <label class="custom-radio">
              <input type="radio" name="addMethod" value="content">
              <span class="radio-checkmark"></span>
              æ‰‹åŠ¨è¾“å…¥å†…å®¹
            </label>
          </div>
        </div>

        <!-- è®¢é˜…é“¾æ¥è¾“å…¥ -->
        <div class="form-group" id="urlInputGroup">
          <label>è®¢é˜…é“¾æ¥</label>
          <input type="url" id="subscriptionUrl" name="subscriptionUrl" placeholder="https://example.com/api/v1/client/subscribe?token=...">
          <small style="color: #666; font-size: 12px; margin-top: 4px; display: block;">
            æ”¯æŒV2Rayã€VMessã€VLESSã€Trojanã€Shadowsocksè®¢é˜…é“¾æ¥
          </small>
        </div>

        <!-- æ‰‹åŠ¨è¾“å…¥å†…å®¹ -->
        <div class="form-group" id="contentInputGroup" style="display: none;">
          <label>è®¢é˜…å†…å®¹</label>
          <textarea id="subscriptionContent" name="subscriptionContent" placeholder="ç²˜è´´è®¢é˜…å†…å®¹ï¼ˆæ”¯æŒBase64ç¼–ç æˆ–åŸå§‹æ ¼å¼ï¼‰..." style="height: 120px; resize: vertical;"></textarea>
          <small style="color: #666; font-size: 12px; margin-top: 4px; display: block;">
            å¦‚æœè®¢é˜…é“¾æ¥å› CORSé™åˆ¶æ— æ³•è®¿é—®ï¼Œå¯ä»¥æ‰‹åŠ¨å¤åˆ¶è®¢é˜…å†…å®¹åˆ°è¿™é‡Œ
          </small>
        </div>

        <div class="form-group" id="autoUpdateGroup">
          <label class="custom-checkbox">
            <input type="checkbox" id="subscriptionAutoUpdate" name="subscriptionAutoUpdate" checked>
            <span class="checkbox-checkmark"></span>
            è‡ªåŠ¨æ›´æ–°è®¢é˜…
          </label>
          <small style="color: #666; font-size: 12px; margin-top: 4px; display: block;">
            æ¯24å°æ—¶è‡ªåŠ¨æ›´æ–°ä¸€æ¬¡è®¢é˜…å†…å®¹ï¼ˆä»…é€‚ç”¨äºè®¢é˜…é“¾æ¥ï¼‰
          </small>
        </div>
        <div style="text-align: right;">
          <button type="button" class="btn btn-secondary" id="cancelSubscriptionBtn">å–æ¶ˆ</button>
          <button type="submit" class="btn btn-primary">æ·»åŠ è®¢é˜…</button>
        </div>
      </form>
    </div>
  </div>

  <!-- èŠ‚ç‚¹è¯¦æƒ…æ¨¡æ€æ¡† -->
  <div class="modal" id="nodeDetailModal">
    <div class="modal-content">
      <div class="modal-header">
        <h3>èŠ‚ç‚¹è¯¦æƒ…</h3>
        <button class="close-btn" id="closeNodeDetailModalBtn">&times;</button>
      </div>
      <div id="nodeDetailContent">
        <!-- èŠ‚ç‚¹è¯¦æƒ…å†…å®¹å°†åœ¨è¿™é‡ŒåŠ¨æ€ç”Ÿæˆ -->
      </div>
      <div style="text-align: right; margin-top: 20px;">
        <button type="button" class="btn btn-secondary" id="downloadConfigBtn">ä¸‹è½½é…ç½®</button>
        <button type="button" class="btn btn-primary" id="useNodeBtn">ä½¿ç”¨æ­¤èŠ‚ç‚¹</button>
      </div>
    </div>
  </div>

  <!-- Toast é€šçŸ¥ -->
  <div class="toast" id="toast"></div>

  <script src="performance-monitor.js"></script>
  <script src="performance-charts.js"></script>
  <script src="v2ray-manager.js"></script>
  <script src="options.js"></script>
</body>
</html> 