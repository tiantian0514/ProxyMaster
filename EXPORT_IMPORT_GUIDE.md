# ProxyMaster 导出/导入功能说明

## 🎯 功能概述

ProxyMaster 提供完整的配置导出和导入功能，让您可以：
- 备份所有配置和规则
- 在不同设备间同步设置
- 分享配置给其他用户
- 快速恢复配置

## 📤 导出功能

### 导出内容
新版本的导出功能包含以下完整信息：

1. **代理配置** - 所有自定义的代理服务器配置
2. **自动切换规则** - 所有域名匹配和切换规则
3. **扩展设置** - 通知、自动切换、自动回退等设置
4. **统计信息** - 配置数量、规则数量等元数据

### 导出格式
```json
{
  "version": "1.0.3",
  "exportTime": "2024-05-25T10:30:00.000Z",
  "profiles": {
    "proxy1": {
      "name": "proxy1",
      "displayName": "美国代理服务器",
      "protocol": "http",
      "host": "proxy.example.com",
      "port": 8080
    }
  },
  "autoSwitchRules": [
    {
      "name": "Google服务",
      "type": "domain",
      "pattern": "*.google.com",
      "profile": "proxy1",
      "priority": 100,
      "enabled": true
    }
  ],
  "settings": {
    "enableNotifications": true,
    "enableAutoSwitch": true,
    "enableAutoFallback": true,
    "enablePerformanceMonitoring": true
  },
  "statistics": {
    "profileCount": 1,
    "ruleCount": 1,
    "enabledRuleCount": 1
  }
}
```

### 如何导出
1. 打开 ProxyMaster 设置页面
2. 切换到"高级设置"标签页
3. 点击"导出配置"按钮
4. 文件将自动下载，命名格式：`proxymaster-config-YYYY-MM-DD.json`

## 📥 导入功能

### 支持格式
- **新格式** (v1.0.3+): 包含完整的配置、规则和设置
- **旧格式** (v1.0.0-v1.0.2): 向后兼容，自动识别旧格式

### 导入策略
- **合并模式**: 导入的配置会与现有配置合并，不会覆盖
- **智能去重**: 避免重复导入相同的配置和规则
- **设置同步**: 自动应用导入的扩展设置

### 如何导入
1. 打开 ProxyMaster 设置页面
2. 切换到"高级设置"标签页
3. 点击"导入配置"按钮
4. 选择配置文件（.json格式）
5. 查看导入结果提示

## 🔄 版本兼容性

### v1.0.3 新特性
- ✅ 包含自动切换规则
- ✅ 包含扩展设置
- ✅ 包含统计信息
- ✅ 向后兼容旧格式

### 旧版本兼容
- ✅ 自动识别 v1.0.0-v1.0.2 格式
- ✅ 正确导入 `rules` 字段（旧格式）
- ✅ 正确导入 `autoSwitchRules` 字段（新格式）

## 📋 使用场景

### 1. 备份配置
定期导出配置文件作为备份，防止意外丢失。

### 2. 设备同步
在多台设备间同步 ProxyMaster 配置：
1. 在设备A导出配置
2. 将文件传输到设备B
3. 在设备B导入配置

### 3. 团队分享
分享常用的代理配置给团队成员：
1. 配置好代理和规则
2. 导出配置文件
3. 分享给团队成员导入

### 4. 快速部署
为新用户提供预配置的设置文件，快速上手。

## 🛡️ 安全注意事项

### 敏感信息
导出的配置文件可能包含：
- 代理服务器地址和端口
- 用户名和密码（如果配置了认证）
- 自动切换规则

### 安全建议
1. **妥善保管**: 导出文件包含敏感信息，请妥善保管
2. **传输加密**: 通过安全渠道传输配置文件
3. **定期更新**: 如果代理密码变更，及时更新配置
4. **访问控制**: 限制配置文件的访问权限

## 🔧 故障排除

### 导出失败
- 检查浏览器是否允许下载
- 确保有足够的磁盘空间
- 尝试重新打开设置页面

### 导入失败
- 确认文件格式为 JSON
- 检查文件是否损坏
- 验证文件内容格式是否正确

### 部分导入
如果只导入了部分内容：
- 检查原文件是否完整
- 查看浏览器控制台的错误信息
- 尝试重新导入

## 📊 导入结果说明

导入完成后会显示详细结果：
- `X个配置`: 成功导入的代理配置数量
- `X个规则`: 成功导入的自动切换规则数量  
- `扩展设置`: 是否导入了扩展设置

示例：`导入成功: 3个配置, 5个规则, 扩展设置`

## 🚀 最佳实践

1. **定期备份**: 建议每周导出一次配置作为备份
2. **版本管理**: 在文件名中包含日期，便于版本管理
3. **测试导入**: 在重要环境中使用前，先在测试环境验证
4. **文档记录**: 为复杂配置添加注释和说明文档

## 📞 技术支持

如果遇到导出/导入问题：
1. 查看浏览器控制台错误信息
2. 检查配置文件格式是否正确
3. 联系开发者：hkhuangym@gmail.com
4. 提供详细的错误信息和配置文件样本 